<div class="d-flex align-items-center justify-content-between my-4">
    <h4 class="fw-bold">Quotation List</h4>
    <!-- <nz-input-group [nzSuffix]="suffixIconSearch" nzSize="large" style="width: 320px;">
        <input [(ngModel)]="search" (ngModelChange)="searchHandler($event)" type="text" nz-input placeholder="Search Projects" />
    </nz-input-group>
    <ng-template #suffixIconSearch>
        <span nz-icon nzType="search"></span>
    </ng-template> -->
</div>
<div class="d-flex align-items-center justify-content-between mb-3">
    <span class="fw-light">Result of {{ total }} Quotation</span>
    <div class="d-flex">
        <div class="me-2">
            Rows per page: 
            <nz-select [(ngModel)]="pageSize">
                <nz-option nzLabel="5" [nzValue]="5"></nz-option>
                <nz-option nzLabel="10" [nzValue]="10"></nz-option>
            </nz-select>
        </div>
        <button (click)="getQuotation()" class="me-2 filter-icon" nz-button nzType="default" nzSize="default"><span nz-icon nzType="reload"></span></button>
        <button (click)="showAddModal()"  nzSize="default" nz-button nzType="primary">Add Quotation</button>
    </div>
</div>

<ng-container *ngIf="quotation$ | async as quotation; else loadingTable">
  <nz-table 
    #basicTable 
    [nzData]="quotation.data"
    nzBordered
  >
    <thead>
      <tr>
        <th>Project ID</th>
        <th>Project Name</th>
        <th>Last Revision</th>
        <th>Action</th>
      </tr>
    </thead>
    <tbody>
        <ng-container *ngFor="let data of basicTable.data">
            <tr>
                <td>{{ data.project_pid }}</td>
                <td>{{ data.name }}</td>
                <td>{{ data.quotation?.revision }}</td>
                <td>
                    <div class="d-flex gap-3">
                        <a nz-dropdown nzTrigger="click" [nzDropdownMenu]="menu" style="text-decoration: none;" >
                          <div class="d-flex align-items-center">
                            <i nz-icon nzType="more" nzTheme="outline"></i>
                            <p class="m-0 p-0">More</p>                       
                          </div>
    
                        </a>
                        <nz-dropdown-menu #menu="nzDropdownMenu">
                          <ul nz-menu class="dropdown-wrapper" style="width: 120px;">
                            <li nz-menu-item class="gap-2 list-dropdown" (click)="showDetailModal()">
                                <div class="d-flex gap-2">
                                    <span nz-icon nzType="eye" nzTheme="twotone"></span>
                                    <p class="m-0 p-0">Detail</p>
                                </div>
                            </li>
                            <li nz-menu-item class="gap-2 list-dropdown"  (click)="showEdit(data, 'edit')">
                              <div class="d-flex gap-2">
                                <span nz-icon nzType="edit" nzTheme="twotone"></span>
                                <p class="m-0 p-0">Edit</p>
                              </div>
                            </li>
                            <li nz-menu-item class="gap-2 list-dropdown"  (click)="showEdit(data, 'revision')">
                              <div class="d-flex gap-2">
                                <span nz-icon nzType="diff" nzTheme="twotone"></span>
                                <p class="m-0 p-0">Revision</p>
                              </div>
                            </li>
                            <!-- <li nz-menu-item class="gap-2 list-dropdown">
                              <div class="d-flex gap-2">
                                <span nz-icon nzType="copy" nzTheme="twotone" ></span>
                                <p class="m-0 p-0">Duplicate</p>  
                              </div>
                            </li> -->
                            <li nz-menu-item class="gap-2 list-dropdown">
                                <div class="d-flex gap-2">
                                    <span nz-icon nzType="delete" nzTheme="twotone" [nzTwotoneColor]="'#f50'"></span>
                                    <p class="m-0 p-0" style="color: #f50;">Delete</p>  
                                </div>
                            </li>
                          </ul>
                        </nz-dropdown-menu>
                      </div>
                </td>
              </tr>
        </ng-container>
    </tbody>
  </nz-table>
</ng-container>

<ng-template #loadingTable>
  <nz-table 
    #basicTable 
    nzBordered 
    [nzLoading]="true"
    [nzTableLayout]="'fixed'"
    [nzScroll]="{ x: '100vw' }"
  >
      <thead>
        <tr>
          <th>Project ID</th>
          <th>Project Name</th>
          <th>Last Revision</th>
          <th>Action</th>
        </tr>
      </thead>
      <tbody>
      </tbody>
    </nz-table>
</ng-template>
